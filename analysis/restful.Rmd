---
title: "RESTful APIs"
author: "Dave Tang"
date: "`r Sys.Date()`"
output:
  workflowr::wflow_html:
    toc: false
editor_options:
  chunk_output_type: console
---

## Introduction

> [Representational state transfer](https://en.wikipedia.org/wiki/Representational_state_transfer) (REST) is a software architectural style that defines a set of constraints to be used for creating Web services. Web services that conform to the REST architectural style, called RESTful Web services, provide interoperability between computer systems on the Internet. RESTful Web services allow the requesting systems to access and manipulate textual representations of Web resources by using a uniform and predefined set of stateless operations. Other kinds of Web services, such as SOAP Web services, expose their own arbitrary sets of operations.

A client will receive a representation of the state of the requested resource from a server when a RESTful API is called. The representation of the state is typically returned in JSON.

A server requires an identifier for the resource, which is typically the URL of the resource and is also known as the endpoint, and the operation to perform on the resource in the form of an HTTP method:

1. GET − Provides a read only access to a resource.
2. POST − Used to create a new resource.
3. DELETE − Used to remove a resource.
4. PUT − Used to update a existing resource or create a new resource.

Stateless operations means that each request contains all the information the server requires to perform the operation and does not require information from a previous query.

There are six contraints that must be adhered to in order for an API to be RESTful:

1. Uniform interface
2. Client — server separation
3. Stateless
4. Layered system
5. Cacheable
6. Code-on-demand

See https://www.tutorialspoint.com/restful/restful_introduction.htm for more information.

## Purpose

RESTful APIs allow you to programmatically interact with various resources; this ultimately saves you time and promotes reproducibility.

## JSON

JSON stands for JavaScript Object Notation and is a syntax for storing and exchanging data. Use the `rjson` package to parse JSON output.

```{r eval=FALSE}
install.packages("rjson")
```

Load into `data/example.json` into R and convert to data frame.

```{r read_example}
library("rjson")
read_json <- fromJSON(file = "data/example.json")
as.data.frame(read_json)[, 1:5]
```

## Application

`data/example.json` was generated by running the following query:

```{bash eval=FALSE}
curl -H 'Accept: application/json' \
-H 'Content-type: application/json' -X POST \
-d '{ "ids" : ["rs116035550", "COSM476" ] }' \
https://rest.ensembl.org/vep/human/id/ > example.json
```

If you wanted to get information for another SNP, e.g. [rs17822931](https://www.snpedia.com/index.php/Rs17822931), you can just modify the `ids` field.

```{bash eval=FALSE}
curl -H 'Accept: application/json' \
-H 'Content-type: application/json' -X POST \
-d '{ "ids" : ["rs17822931"] }' \
https://rest.ensembl.org/vep/human/id/ > rs17822931.json
```

If you write a script that can generate the queries, you can easily obtain information on SNP IDs of interest.
